## 数字序列中某一位的数字
数字以0123456789101112131415…的格式序列化到一个字符序列中。在这个序列中，第5位（从下标0开始计数）是5，第13位是1，第19位是4，等等。

请写一个函数，求任意第n位对应的数字。

 

示例 1：
```
输入：n = 3
输出：3
```
示例 2：
```
输入：n = 11
输出：0
```

限制：
```
0 <= n < 2^31
```
From: [数字序列中某一位的数字](https://leetcode-cn.com/problems/shu-zi-xu-lie-zhong-mou-yi-wei-de-shu-zi-lcof)

## 分析
首先排除暴力解法，还是通过观察数据规律   
```
0 ~ 9   总共有9位【0算第0位】, 长度为  (9 - 0) * 1 = 9
10 ~ 99   (99 - 10 + 1) * 2 = 90 * 2 = 180
100 ~ 999 (999 - 100 + 1) * 3 = 900 * 3 = 2700
1000 ~ 9999 (9999 - 1000 + 1) * 4 = 9000 * 4 = 36000
```
不难看出，除了`0~9`以外，其它规律为:
```
9 * Math.pow(10, multi) * (multi + 1)
```
那么现在只需要找到对应的`multi`，即可根据公式解出，这里为了得到`multi`可以将n和当前每个位置的和相比较，例如数字`2200`，由以上得出`9 + 180 < 2200 < 9 + 180 + 2700`，因此`multi`可以得出为2，再根据公式
```
(x - 100 + 1) * 3 = (2200 - 9 - 180)
```
此时若无法除尽`multi`，则应该向上取证，代表已经读到下一位数了，这里得到`x = 770`。再根据余数确定读到的第几位，这里`(2200 - 9 - 180) % 3 = 1`，即现在读取的第一位，即数字字符串的第0位`7`。这里需要注意的是，若余数为0，则代表是字符串的最后一位，而非第0位。

## 解答
```javascript
var findNthDigit = function(n) {
  if (n <= 9) return n;
  let sum = 9;
  let before = 0;
  let pow = 10;
  let multi = 2;
  while (true) {
    if (sum === n) break;
    if (sum > n) {
      pow /= 10;
      multi--;
      break;
    };
    before = sum;
    sum += 9 * multi * pow;
    pow *= 10;
    multi++;
  }
  let diff = n - before;
  const str = String(Math.ceil(diff / multi) - 1 + pow);
  const carry = diff % multi ? diff % multi - 1 : str.length - 1;
  return str[ carry ];
};
```