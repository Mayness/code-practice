<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
        给定一个二维网格和一个单词，找出该单词是否存在于网格中。

        单词必须按照字母顺序，通过相邻的单元格内的字母构成，其中“相邻”单元格是那些水平相邻或垂直相邻的单元格。同一个单元格内的字母不允许被重复使用。

        示例:

        ```
        board =
        [
          ['A','B','C','E'],
          ['S','F','C','S'],
          ['A','D','E','E']
        ]

        给定 word = "ABCCED", 返回 true.
        给定 word = "SEE", 返回 true.
        给定 word = "ABCB", 返回 false.
        ```
      */

      var exist = function(board, word) {
        let flag = false;
        for (let i = 0; i < board.length; i++) {
          for (let j = 0; j < board[i].length; j++) {
            if (flag) return true;
            if (board[i][j] === word[0]) {
              getMathWords(word, i, j, []);
            }
          }
        }

        function getMathWords(words, i, j, visited) {
          if (i < 0 || j < 0 || i >= board.length || j >= board[i].length || visited.includes(`${i},${j}`) || flag) return;
          if (board[i][j] === words[0]) {
            visited = visited.slice(0);
            visited.push(`${i},${j}`);
            const remain = words.slice(1);
            if (remain) {
              getMathWords(remain, i + 1, j, visited);
              getMathWords(remain, i, j + 1, visited);
              getMathWords(remain, i - 1, j, visited);
              getMathWords(remain, i, j - 1, visited);
            } else {
              flag = true;
            }
          }
        }
        return flag;
      };

      console.log(exist(
        [
          ["A","B","C","E"],
          ["S","F","E","S"],
          ["A","D","E","E"]
        ], 'ABCESEEEFS'));
    </script>
  </body>
</html>
