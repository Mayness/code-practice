<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var minimumLengthEncoding = function(words) {
        const set = new Set(words);
        let treeMap = {};
        let length = 0;
        let num = 0;
        for (let item of words) {
          let itemTree = treeMap;
          let repair = 0;
          let flag = false;
          let obj;
          let currObj;
          for (let i = item.length - 1; i >= 0; i--) {
            const char = item[ i ];
            if (flag) {
              currObj[ char ] = {};
              currObj = currObj[ char ];
              continue;
            }
            if (itemTree[ char ]) {
              itemTree = itemTree[ char ];
              if (Object.keys(itemTree).length === 0) {
                repair = item.length - i + 1;
              }
              obj = {};
            } else {
              currObj = {};
              obj = currObj;
              currObj[ char ] = {};
              currObj = currObj[ char ];
              flag = true;
            }
          }
          if (Object.keys(obj).length !==  0) {
            length += (item.length - repair);
            num++;
          }
          Object.assign(itemTree, obj);
        }
        return length + num;
      };
      // time#cme#
      console.log(minimumLengthEncoding(["tiame", "came", "bell"]));
    </script>
  </body>
</html>
