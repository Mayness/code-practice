<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var minWindow = function(s, t) {
        if (!t.length) return '';
        const map = {};
        for (let item of t) {
          map[item] = (map[item] || 0) + 1;
        }
        let left = 0;
        let right = 0;
        let minDiffArr = [0, Number.MAX_SAFE_INTEGER];
        let flag = false;
        while (right < s.length) {
          const rightChar = s[right];
          if (map[rightChar] !== undefined) {
            map[rightChar]--;
          }
          if (check(map) || flag) {
            let flag = true;
            while (left < right && (map[s[left]] === undefined || map[s[left]] < 0)) {
              if (map[s[left]] !== undefined) map[s[left]]++;
              left++;
            }
            minDiffArr = minDiffArr[1] - minDiffArr[0] > right - left ? [left, right] : minDiffArr;
          }
          right++;
        }
        return minDiffArr[1] - minDiffArr[0] === Number.MAX_SAFE_INTEGER ? '' : s.substring(minDiffArr[ 0 ], minDiffArr[ 1 ] + 1);
      };

      function check(map) {
        for (let i in map) {
          if (map[i] > 0) return false;
        }
        return true;
      }

      console.log(minWindow("ab", "b"));
    </script>
  </body>
</html>
